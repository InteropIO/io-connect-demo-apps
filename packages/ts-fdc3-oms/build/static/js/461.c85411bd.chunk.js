"use strict";(self.webpackChunkts_acme_oms=self.webpackChunkts_acme_oms||[]).push([[461],{2316:function(e,n,t){t.d(n,{Z:function(){return b}});var r=t(885),i=t(4165),o=t(5861),a=t(2791),c=t(9293),s=t(5155),l=function(e){var n=(0,a.useState)(),t=(0,r.Z)(n,2),i=t[0],o=t[1],c=(0,a.useState)(),s=(0,r.Z)(c,2),l=s[0],u=s[1],d=(0,a.useState)(),f=(0,r.Z)(d,2),v=f[0],m=f[1];(0,a.useEffect)((function(){if(e){var n=void 0;try{console.log("Subscribing to window channels"),n=e.channels.subscribe(p)}catch(t){console.error(t)}return function(){var e;console.log("Unsubscribing from window channels"),null===(e=n)||void 0===e||e()}}}),[e]);var p=function(e,n,t){o(e),u(n),m(t)};return[i,l,v]},u=function(e){return"___workspace___"+e},d=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.id)===(null===n||void 0===n?void 0:n.windows.my().id)){e.next=2;break}return e.abrupt("return");case 2:console.log("added to workspace:",t.workspaceId),r.setWorkspaceId(t.workspaceId),r.setContextName(u(t.workspaceId));case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),f=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t,r){return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.windowId===(null===n||void 0===n?void 0:n.windows.my().id)){e.next=3;break}return e.abrupt("return");case 3:console.log("removed from workspace"),r.setWorkspaceId("");case 5:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}(),v=function(e){var n=(0,a.useState)(""),t=(0,r.Z)(n,2),c=t[0],l=t[1],v=(0,s.Z)(e,c),m=(0,r.Z)(v,1)[0],p=(0,a.useState)(""),h=(0,r.Z)(p,2),g=h[0],x=h[1];return(0,a.useEffect)((function(){if(e){var n=void 0,t=void 0;try{var r,i;console.log("Subscribing to workspaces window added"),n=null===(r=e.workspaces)||void 0===r?void 0:r.onWindowAdded((function(n){d(e,n,{setContextName:l,setWorkspaceId:x})})),console.log("Subscribing to workspaces window removed"),t=null===(i=e.workspaces)||void 0===i?void 0:i.onWindowRemoved((function(n){f(e,n,{setContextName:l,setWorkspaceId:x})}))}catch(o){console.error(o)}return function(){var e,r;null===(e=n)||void 0===e||e.then((function(e){console.log("Unsubscribing from workspaces window added"),e()})).catch(console.error),null===(r=t)||void 0===r||r.then((function(e){console.log("Unsubscribing from workspaces window removed"),e()})).catch(console.error)}}}),[e]),(0,a.useEffect)((function(){(0,o.Z)((0,i.Z)().mark((function n(){var t,r;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,null===e||void 0===e||null===(t=e.workspaces)||void 0===t?void 0:t.getMyWorkspace().catch((function(e){return null}));case 2:(r=n.sent)&&(x(r.id),l(u(r.id)));case 4:case"end":return n.stop()}}),n)})))()}),[e]),[m,g,c]},m=t(1211),p=function(e){var n;if(e){var t=null===e||void 0===e||null===(n=e.instrument)||void 0===n?void 0:n.id;return(null===t||void 0===t?void 0:t.RIC)||""}},h=t(6074),g=t(184),x=function(){var e=(0,o.Z)((0,i.Z)().mark((function e(n,t,r,o){var a,c,s,l,u;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.value,c=a,s=(r.value||r.chan)&&void 0!==t.chan,l=(r.value||r.glob)&&void 0!==t.glob,u=(r.value||r.ws)&&void 0!==t.ws,e.t0=s,!e.t0){e.next=10;break}return e.next=9,o.chan();case 9:e.t0=e.sent;case 10:if(!e.t0){e.next=12;break}c=t.chan;case 12:if(e.t1=l,!e.t1){e.next=17;break}return e.next=16,o.glob();case 16:e.t1=e.sent;case 17:if(!e.t1){e.next=19;break}c=t.glob;case 19:if(e.t2=u,!e.t2){e.next=24;break}return e.next=23,o.ws();case 23:e.t2=e.sent;case 24:if(!e.t2){e.next=26;break}c=t.ws;case 26:c!==a&&(t.value=c,null===n||void 0===n||n(c));case 27:case"end":return e.stop()}}),e)})));return function(n,t,r,i){return e.apply(this,arguments)}}(),w={chan:function(){return m.Z.evaluateCondition("sync.instrument.in.channel")},ws:function(){return m.Z.evaluateCondition("sync.instrument.in.wsContext")},glob:function(){return m.Z.evaluateCondition("sync.instrument.in.globalContext")}},y=function(e){var n=e.instrumentSetter,t=(0,a.useContext)(c.zq);(0,a.useEffect)((function(){return console.log("ContextHandler loaded"),function(){console.log("ContextHandler reloading...")}}),[]);var i=(0,a.useRef)({value:""}),o=l(t),u=(0,r.Z)(o,2),d=u[0],f=u[1],m=(0,s.Z)(t,h.x),y=(0,r.Z)(m,1)[0],b=v(t),k=(0,r.Z)(b,2),Z=k[0],D=k[1];return(0,a.useEffect)((function(){if(n){i.current.chan=p(d);var e=f?{chan:!0}:{value:!0};x(n,i.current,e,w)}}),[d,f,n]),(0,a.useEffect)((function(){if(n){i.current.glob=p(y);x(n,i.current,{glob:!0},w)}}),[y,n]),(0,a.useEffect)((function(){if(n){i.current.ws=p(Z);x(n,i.current,{ws:!0},w)}}),[Z,D,n]),(0,g.jsx)("div",{style:{display:"none"}})},b=a.memo(y)},7461:function(e,n,t){t.r(n),t.d(n,{default:function(){return de}});var r=t(885),i=t(2791),o=t(7251),a=t(1413),c=t(4165),s=t(5861),l=t(9293),u=t(2953),d=t(5163),f=(t(2293),t(8702),t(3463)),v=(t(4022),t(6459)),m=t(2982),p=(t(7107),t(7978)),h=t(8622),g=t(1501),x=t.n(g),w=t(3421),y=t(184),b={value:"",label:"None",color:"rgba(0,0,0,0)"},k=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(n){var t,r;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",[]);case 2:return e.next=4,null===n||void 0===n?void 0:n.channels.list();case 4:if(!(t=e.sent)){e.next=18;break}r=0;case 7:if(!(r<5)){e.next=18;break}if(!(t.length>0&&t[0].meta)){e.next=10;break}return e.abrupt("break",18);case 10:return e.next=12,(0,w._v)(500);case 12:return e.next=14,null===n||void 0===n?void 0:n.channels.list();case 14:t=e.sent;case 15:r++,e.next=7;break;case 18:if(t&&0!==t.length&&t[0].meta){e.next=20;break}return e.abrupt("return",[]);case 20:return e.abrupt("return",t);case 21:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Z=function(e){return{value:e.value,label:"\u260d",color:e.color}},D=function(e){var n,t,r=(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.color)||"rgba(0,0,0,0)",i=x()(r),o=null!==e&&void 0!==e&&null!==(t=e.data)&&void 0!==t&&t.value?e.isSelected||e.isFocused?x().contrast(i,"white")>2?"white":"black":r:"inherit";return(0,y.jsx)("div",{style:{color:o,backgroundColor:r,textAlign:"center"},children:(0,y.jsx)(p.c.Option,(0,a.Z)({},e))})},C=1.4,I=function(e){var n,t=null===e||void 0===e||null===(n=e.selectProps)||void 0===n?void 0:n.value,r=(null===t||void 0===t?void 0:t.color)||"rgba(0,0,0,0)",i=x()(r),o=null!==t&&void 0!==t&&t.value?x().contrast(i,"white")>2?"white":"black":"inherit";return(0,y.jsx)(f.zx,{style:{color:o,backgroundColor:r,lineHeight:C+"rem",padding:"0 "+.2*C+"rem",fontSize:C+"rem",cursor:"default",userSelect:"none"},onClick:function(){e.selectProps.menuIsOpen?e.selectProps.onMenuClose():e.selectProps.onMenuOpen()},onBlur:function(){e.selectProps.onMenuClose()},children:null===t||void 0===t?void 0:t.label})},S=function(e){var n=(0,i.useState)([]),t=(0,r.Z)(n,2),o=t[0],u=t[1],d=(0,i.useState)(Z(b)),f=(0,r.Z)(d,2),p=f[0],g=f[1],x=(0,i.useContext)(l.zq);return(null===e||void 0===e?void 0:e.baseSize)&&(C=e.baseSize),(0,i.useEffect)((function(){(0,s.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(x);case 2:n=e.sent,console.log("All Channels",n),(t=[b]).push.apply(t,(0,m.Z)(n.map((function(e){return{value:e.name,label:"\u2714",color:e.meta.color}})))),u(t);case 7:case"end":return e.stop()}}),e)})))()}),[x]),(0,y.jsx)("div",{style:{},children:(0,y.jsx)(h.ZP,{classNamePrefix:"select",className:"channel-selector",components:{DropdownIndicator:function(){return null},IndicatorSeparator:function(){return null},Option:D,Control:I},styles:{menu:function(e){var n=Object.assign({},((0,v.Z)(e),e));return(0,a.Z)((0,a.Z)({},n),{},{width:"4rem"})}},options:o,value:p,menuPlacement:"auto",maxMenuHeight:640,onChange:function(e){g(Z(e))}})})},j=t(4979),N=t(1009),E=t(2233),F=t(1799),O=t.n(F),M=(t(1778),t(8748),t(3123)),T=t(3816),q=(0,o.Dn)(new Date);function R(e){return null===e||void 0===e?void 0:e.isBefore(q)}var H={menu:function(e){return(0,a.Z)((0,a.Z)({},e),{},{minWidth:"6rem"})},menuList:function(e){return(0,a.Z)((0,a.Z)({},e),{},{maxHeight:150})}},L=function(e){var n=(0,M.a)(),t=(0,T.b)(),i=n?Object.entries(n).map((function(e){var n=(0,r.Z)(e,2)[1];return{value:n.clientId,label:n.clientId}})):[];i.unshift({value:"",label:"* ALL"});var o=t?Object.entries(t).map((function(e){var n=(0,r.Z)(e,2)[1],t=n.ticker,i=n.bbgExchange;return{value:(0,w.cJ)(t,i),label:(0,w.cJ)(t,i),meta:{ticker:t,bbgExchange:i}}})).sort((function(e,n){return e.value<n.value?-1:1})):[];o.unshift({value:"",label:"* ALL",meta:{ticker:"",bbgExchange:""}});var a=i.find((function(n){return n.value===(null===e||void 0===e?void 0:e.clientId)}));a||(a=null!==e&&void 0!==e&&e.clientId?{label:e.clientId,value:e.clientId}:null);var c,s,l,u,d=o.find((function(n){var t,r,i,o;return(null===(t=n.meta)||void 0===t?void 0:t.ticker)===(null===e||void 0===e||null===(r=e.securityId)||void 0===r?void 0:r.ticker)&&(null===(i=n.meta)||void 0===i?void 0:i.bbgExchange)===(null===e||void 0===e||null===(o=e.securityId)||void 0===o?void 0:o.bbgExchange)}));d||(d=null!==e&&void 0!==e&&e.securityId?{label:(null===(c=e.securityId)||void 0===c?void 0:c.ticker)+" "+(null===(s=e.securityId)||void 0===s?void 0:s.bbgExchange),value:(null===(l=e.securityId)||void 0===l?void 0:l.ticker)+" "+(null===(u=e.securityId)||void 0===u?void 0:u.bbgExchange),meta:e.securityId}:{value:"",label:"* ALL"});return(0,y.jsx)("div",{className:"d-flex align-items-baseline justify-content-between",children:(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[(0,y.jsx)("span",{children:"From\xa0"}),(0,y.jsx)(O(),{value:e.fromDate,onChange:function(n){return e.setFromDate(new Date(n.valueOf()))},dateFormat:"YYYY-MM-DD",timeFormat:!1,closeOnSelect:!0,inputProps:{style:{width:"5rem",height:"2rem",padding:"0 1px",textAlign:"center"},placeholder:"from",readOnly:!0},isValidDate:R}),(0,y.jsx)("span",{children:"\xa0\xa0\xa0"}),(0,y.jsx)("span",{children:"To\xa0"}),(0,y.jsx)(O(),{value:e.toDate,onChange:function(n){return e.setToDate(new Date(n.valueOf()))},dateFormat:"YYYY-MM-DD",timeFormat:!1,closeOnSelect:!0,inputProps:{style:{width:"5rem",height:"2rem",padding:"0 1px",textAlign:"center"},placeholder:"from",readOnly:!0},isValidDate:R}),(0,y.jsx)("span",{children:"\xa0\xa0\xa0"}),(0,y.jsx)("span",{children:"Client\xa0"}),(0,y.jsx)(f.JX,{style:{width:"5rem",padding:"0"},children:(0,y.jsx)(E.Z,{classNamePrefix:"select",className:"select-minpadding",value:a,options:i,onChange:function(n){return e.setClientId((null===n||void 0===n?void 0:n.value)||"")},styles:H})}),(0,y.jsx)("span",{children:"\xa0\xa0\xa0"}),(0,y.jsx)("span",{children:"Security\xa0"}),(0,y.jsx)(f.JX,{style:{width:"6rem",padding:"0"},children:(0,y.jsx)(E.Z,{classNamePrefix:"select",className:"select-minpadding",value:d,options:o,onChange:function(n){return e.setSecurityId(null===n||void 0===n?void 0:n.meta)},styles:H})})]})})},P=t(9938),z=t(3818),A=t(4423),V=t(7497),_=t(3114),W=t(7762),Y=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(n,t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.interop.invoke(V.mq,t).then((function(e){return e.returned})).catch((function(e){return console.error("Failed invoking ".concat(V.mq,". Error: "),e),{orders:[]}})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),B=function(){var e=(0,s.Z)((0,c.Z)().mark((function e(n,t){return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.interop.invoke(V.aV,t).then((function(e){return e.returned})).catch((function(e){console.error("Failed invoking ".concat(V.aV,". Error: "),e)})));case 1:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}();var U=t(6838),G=t(4453),J=t(9231),K=t(2957),X=t(1434),Q=t(6367),$=t(2316),ee=t(670),ne=function(e){return e.orderId.toString()},te=function(e){var n;return null===(n=e.sliceId)||void 0===n?void 0:n.toString()},re=function(e){var n={};return"Done"===e.data.tradeStatus?n.opacity=.6:n.opacity=1,n},ie=function(){window.location.hash=P.SK},oe=function(){window.location.hash=P.Hq},ae=void 0,ce=function(e){var n,t,v,p,h=function(e){var n={};e.replace(/([?&])+([^=?#&]+)(?:=([^?#&]*))?/g,(function(e,t,r,i){var o=decodeURIComponent(r),a=decodeURIComponent(i),c=o[0].toUpperCase()+o.slice(1);return n["url"+c]=a,""}));var t="",r=e.match(/#([^?#&]*)/);return r&&(t=decodeURIComponent(r[1])),n.urlHash=t,n}(window.location.href),g=h.urlHash,x=h.urlFromDate,b=h.urlToDate,k=g===P.Hq,Z=function(){var e=(0,i.useContext)(l.zq),n=(0,i.useCallback)((0,s.Z)((0,c.Z)().mark((function n(){var t,r,i,o=arguments;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:new Date,n.next=3,Y(e,{date:t,withSlices:!1,withTrades:!1});case 3:return r=n.sent,i=r.orders,n.abrupt("return",null!==i&&void 0!==i?i:[]);case 6:case"end":return n.stop()}}),n)}))),[e]),t=(0,i.useCallback)(function(){var e=(0,s.Z)((0,c.Z)().mark((function e(t){var r,i,a,s,l;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=new Date(t.to)).setHours(23,59,59,999),i=[],a=new Date(r),s=0;case 5:if(!(a.getTime()>t.from.getTime()&&s<60)){e.next=14;break}return s++,e.next=9,n(a);case 9:l=e.sent,a=(0,o.tv)(a,-1),i.push.apply(i,(0,m.Z)(l)),e.next=5;break;case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),[n]),r=(0,i.useCallback)(function(){var n=(0,s.Z)((0,c.Z)().mark((function n(t,r){var i,o,a;return(0,c.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,B(e,{orderId:t,date:r,withSlices:!0,withTrades:!1});case 2:return o=n.sent,a=null!==(i=null===o||void 0===o?void 0:o.slices)&&void 0!==i?i:[],n.abrupt("return",a);case 5:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}(),[e]);return{getOrders:n,getOrdersHistory:t,getOrderSlices:r}}(),D=Z.getOrders,C=Z.getOrdersHistory,I=Z.getOrderSlices,E=(0,i.useRef)();ae=(0,i.useContext)(l.zq);var F=(0,d.Z)();window.grid=F;var O=(0,i.useState)(),T=(0,r.Z)(O,2),q=T[0],R=T[1],H=(0,i.useState)(new Date),ce=(0,r.Z)(H,2),se=ce[0],le=ce[1],ue=(0,i.useState)(0),de=(0,r.Z)(ue,2),fe=de[0],ve=de[1],me=(0,i.useState)((null===(n=e.historyFilter)||void 0===n?void 0:n.fromDate)||new Date),pe=(0,r.Z)(me,2),he=pe[0],ge=pe[1],xe=(0,i.useState)((null===(t=e.historyFilter)||void 0===t?void 0:t.toDate)||new Date),we=(0,r.Z)(xe,2),ye=we[0],be=we[1],ke=(0,i.useState)((null===(v=e.historyFilter)||void 0===v?void 0:v.clientId)||""),Ze=(0,r.Z)(ke,2),De=Ze[0],Ce=Ze[1],Ie=(0,i.useState)(null===(p=e.historyFilter)||void 0===p?void 0:p.securityId),Se=(0,r.Z)(Ie,2),je=Se[0],Ne=Se[1],Ee=(0,M.a)(),Fe=(0,U.E)(),Oe=(0,G.I)(),Me=(0,J.S)(),Te=(0,K.j)().syncInstrument,qe=(0,Q.Z)(ae).publishInstrument,Re=(0,ee.Z)();(0,i.useEffect)((function(){var e=function(){return le(new Date)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]),(0,i.useEffect)((function(){var e=new Date(x),n=new Date(b);isNaN(e.getTime())||ge(e),isNaN(n.getTime())||be(n)}),[x,b]),(0,i.useEffect)((function(){var n,t,r,i,o;(null===(n=e.historyFilter)||void 0===n?void 0:n.fromDate)&&ge(e.historyFilter.fromDate),(null===(t=e.historyFilter)||void 0===t?void 0:t.toDate)&&be(e.historyFilter.toDate),null!=(null===(r=e.historyFilter)||void 0===r?void 0:r.clientId)&&Ce(e.historyFilter.clientId),null!=(null===(i=e.historyFilter)||void 0===i?void 0:i.securityId)&&Ne(e.historyFilter.securityId),(null===(o=e.historyFilter)||void 0===o?void 0:o.switchView)&&(window.location.hash=P.Hq)}),[e.historyFilter]),(0,i.useEffect)((function(){if(!k){var e;null===(e=ae)||void 0===e||e.windows.my().setTitle("Acme Orders");var n=setInterval((function(){le(new Date)}),5e3);return function(){return clearInterval(n)}}var t;null===(t=ae)||void 0===t||t.windows.my().setTitle("Acme Order History")}),[k]),(0,i.useEffect)((function(){if(!k){var e,n=(e=fe,new Date(se.getTime()+e));E.current=n,D(n).then((function(e){return R(e)}))}}),[se,fe,k,D]),(0,i.useEffect)((function(){k&&(0,s.Z)((0,c.Z)().mark((function e(){var n,t;return(0,c.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C({from:he,to:ye});case 2:if(n=e.sent,De&&(n=n.filter((function(e){return e.clientId===De}))),je){try{t=new RegExp("^"+je.ticker,"i")}catch(r){t=new RegExp("not matching")}n=n.filter((function(e){return e.instrument.ticker.match(t)}))}R(n);case 6:case"end":return e.stop()}}),e)})))()}),[he,ye,De,je,k,C]);var He=(0,i.useCallback)((function(e){var n,t=(0,w.Eb)(e),r=null===F||void 0===F||null===(n=F.api)||void 0===n?void 0:n.getSelectedNodes();if(1===(null===r||void 0===r?void 0:r.length)){var i,o,a=r[0];(null===(i=a.data)||void 0===i||null===(o=i.instrument)||void 0===o?void 0:o.ticker)!==t&&a.setSelected(!1)}}),[F]),Le=(0,i.useCallback)((function(n){if(n.ctrlKey||!e.setNewOrderView){var t,r=n.shiftKey?{type:"fdc3.order",side:"2",contact:{type:"fdc3.contact",name:"CNAME",id:{email:"a@b.com"}},instrument:{type:"fdc3.instrument",name:"instrument name",id:{ticker:"DGE",RIC:"DGE LN"}},quantity:123,orderType:"1",limitPrice:42.42,timeInForce:"0",expireTime:"2020-09-01T08:00:00.000Z",notes:"low touch"}:{type:"fdc3.order"};null===(t=ae)||void 0===t||t.intents.raise({intent:"NewOrder",context:{type:"fdc3.order",data:r},target:"reuse"})}else e.setNewOrderView(!0)}),[e]),Pe=(0,i.useCallback)((function(e){if(console.log(e),window.dummyNonExistent){var n,t,r=null===(n=F.api)||void 0===n?void 0:n.getDisplayedRowAtIndex(4);if(console.log("node1:",r),r)null===(t=F.api)||void 0===t||t.flashCells({rowNodes:[r],flashDelay:200,fadeDelay:500})}}),[F]),ze=(0,i.useCallback)((function(e){var n,t,r;if(null!=e.data){var i=e.data;if(null===(n=ae)||void 0===n||n.interop.invoke(V.OT,{ticker:(0,w.xq)(i.instrument),instruments:[(0,w.xq)(i.instrument)]},"all").then((function(){console.log("BMLL Vantage left click sync successful")})).catch((function(e){console.log("BMLL Vantage left click sync failed",e)})),e.api.getSelectedNodes().length>1)console.log("Multiple selection. Will not publish instrument or contact");else{qe(e.data.instrument),Te(e.data.instrument.ticker),Re(e.data.instrument);var o=null===(t=e.data)||void 0===t?void 0:t.clientId,a={type:"fdc3.order",id:e.data.orderId,createTime:e.data.dateCreated};null===(r=ae)||void 0===r||r.intents.raise({intent:A.Ft,context:{type:a.type,data:a},target:"reuse"}).catch(console.error);var c,s=null===Ee||void 0===Ee?void 0:Ee.find((function(e){return e.clientId===o}));if(s)null===(c=ae)||void 0===c||c.interop.invoke(V.h,{contact:{ids:[{systemName:A.ff,nativeId:s.salesforceId}],emails:[s.email]}},"skipMine").catch(console.error)}}}),[Ee,qe,Te]),Ae=(0,i.useCallback)((function(e){var n=(0,_.E)(e);if(n.length<=0)return[];var t=n.map((function(e){var n=e.data.instrument;return{ticker:n.ticker,bbgExchange:n.bbgExchange}})),r=n[0].data,i=[{name:"View Executions",action:function(){var e;null===(e=ae)||void 0===e||e.intents.raise({intent:A.Ft,context:{type:"fdc3.order",data:{type:"fdc3.order",id:r.orderId,createTime:r.dateCreated}}})}},{name:"Click for Pre-trade",action:function(){!function(e,n){console.log("orders",n);var t=n[0];null===e||void 0===e||e.interop.invoke(V.OT,{ticker:(0,w.xq)(t.instrument),instruments:n.map((function(e){return(0,w.xq)(e.instrument)}))},"all").then((function(){console.log("BMLL sync successful")})).catch((function(e){console.log("BMLL sync failed",e)}));var r,i="2"===t.side||"5"===t.side?"S":"B";null===e||void 0===e||e.interop.invoke(V.qP,{fid:null===(r=t.instrument)||void 0===r?void 0:r.ticker,currency:t.currency,orderId:t.orderId,side:i,quantity:t.quantity}).then((function(){console.log("Abel Noser sync successful")})).catch((function(e){console.log("Abel Noser sync failed",e)}));var o,a=[],c=(0,W.Z)(n);try{for(c.s();!(o=c.n()).done;){var s=o.value,l="2"===s.side||"5"===s.side?"sell":"buy";a.push({side:l,quantity:s.quantity,symbol:(0,w.xq)(s.instrument),symbolType:"bloombergMarketSymbol",itgMarketLevelId:"1000000000999999"})}}catch(u){c.e(u)}finally{c.f()}null===e||void 0===e||e.interop.invoke(V.Sm,{filters:a}).then((function(){console.log("Virtu sync successful")})).catch((function(e){console.log("Virtu sync failed",e)}))}(ae,n.map((function(e){return e.data})))}},{name:"Click to Track",action:function(){(0,z.g)(t,ae,A.ue)}}];return i}),[]),Ve=void 0;Ve=k?(0,y.jsxs)("div",{className:"d-flex align-items-center justify-content-between pb-3",children:[(0,y.jsx)(L,{fromDate:he,setFromDate:ge,toDate:ye,setToDate:be,clientId:De,setClientId:Ce,securityId:je,setSecurityId:Ne}),(0,y.jsx)(f.zx,{onClick:ie,children:"Current"})]}):(0,y.jsxs)("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[(0,y.jsxs)("div",{className:"d-flex align-items-center",children:[!N.Pe&&(0,y.jsx)(S,{baseSize:null}),(0,y.jsx)(f.zx,{className:"mx-2",onClick:Le,children:"\u2795\xa0Order\xa0Entry"}),(0,y.jsx)(f.zx,{onClick:oe,children:"Order History"})]}),(0,y.jsx)(X.Z,{glue:ae,time:se,timeOffset:fe,setTimeOffset:ve})]});var _e={sidesMap:Fe,orderTypeMap:Oe,orderValidityMap:Me};return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("div",{className:"active-orders-grid d-flex flex-column flex-grow-1",children:[Ve,(0,y.jsx)("div",{className:"ag-tick42 flex-grow-1",children:(0,y.jsx)(u.AgGridReact,{masterDetail:!0,detailRowAutoHeight:!0,detailCellRendererParams:{template:function(e){var n=e.data;return n.split&&n.split.length>0?'<div class="p-4">  <div ref="eDetailGrid"></div></div>':'<div class="text-center p-4">\n                        <span>\n                          <span class="tick42-custom-icon icon-warning icon-size-16">\n                              <i class="icon-info-circled"></i>\n                          </span>\n                        </span>\n                        <span class="ml-1">No Slices</span>\n                      </div>'},refreshStrategy:"rows",detailGridOptions:{immutableData:!0,getRowNodeId:te,columnDefs:j.jF,defaultColDef:(0,a.Z)((0,a.Z)({},j.F3),{},{flex:1}),context:_e},getDetailRowData:function(e){var n=e.data,t=e.successCallback,r=E.current;if(k){var i=(0,o.U)(n.dateCreated);(0,o.hM)(i,r)||(r=i)}I(n.orderId,r).then(t).catch((function(){return t([])}))}},defaultColDef:j.F3,rowData:q,context:_e,immutableData:!0,rowSelection:"multiple",getRowNodeId:ne,getRowStyle:re,suppressContextMenu:!1,allowContextMenuWithControlKey:!0,getContextMenuItems:Ae,onRowDataChanged:Pe,onRowClicked:ze,columnDefs:j.S1,onGridReady:F.onGridReady,cellFlashDelay:200,cellFadeDelay:500})})]}),(0,y.jsx)($.Z,{instrumentSetter:He})]})},se=t(673);function le(e){return(0,y.jsxs)(f.u_,{size:"lg",isOpen:!0,modalTransition:{timeout:0},centered:!0,children:[(0,y.jsx)(f.xB,{children:e.modalHeader}),(0,y.jsx)(f.fe,{children:e.form}),(0,y.jsx)(f.mz,{})]})}var ue={fromDate:(0,o.tv)(new Date,-31),toDate:(0,o.tv)(new Date,-1)};function de(e){var n=(0,i.useState)(!1),t=(0,r.Z)(n,2),o=t[0],a=t[1],c=e.historyFilter||ue,s=(0,i.useCallback)((function(){a(!1)}),[]),l=(0,y.jsx)(se.Z,{onComplete:function(){return s()}});return(0,y.jsxs)("div",{className:"orders-page d-flex flex-column flex-grow-1",children:[o?(0,y.jsx)(le,{form:l,modalHeader:"Order Entry"}):null,(0,y.jsx)(ce,{setNewOrderView:a,historyFilter:c})]})}},670:function(e,n,t){t.d(n,{Z:function(){return c}});var r=t(9293),i=t(2791),o=t(3421),a=t(4423);function c(){var e=(0,i.useContext)(r.zq);return(0,i.useCallback)((function(n){var t=(0,o.qS)(n);t&&(null===e||void 0===e||e.intents.raise({intent:a.DB,context:{type:t.type,data:t}}))}),[e])}},7251:function(e,n,t){t.d(n,{Dn:function(){return i},Q_:function(){return s},U:function(){return o},hM:function(){return c},tv:function(){return r}});var r=function(e,n){var t=new Date(e);return t.setDate(t.getDate()+n),t},i=function(e){var n=new Date(e);return n.setHours(0,0,0,0),n},o=function(e){var n=new Date(e);return n.setHours(23,59,59,999),n},a=function(e){return!!e&&!isNaN(e.getTime())},c=function(e,n){return e&&n&&e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear()},s=function(e){var n=void 0;if(e)if(e instanceof Date)a(e)&&(n=e);else if("string"===typeof e){var t=new Date(e);a(t)&&(n=t)}return n}}}]);
//# sourceMappingURL=461.c85411bd.chunk.js.map